<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Para Alejandra ‚ù§Ô∏è</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:radial-gradient(circle at top,#0b0f1a,#000);
  font-family:Arial,sans-serif;
}
canvas{display:block}

/* Texto */
.texto{
  position:absolute;
  top:10%;
  width:100%;
  text-align:center;
  color:#ffb6c1;
  z-index:5;
  pointer-events:none;
}
h1{color:#ff4d6d;letter-spacing:3px;font-size:32px}
p{max-width:360px;margin:auto;font-style:italic;font-size:19px}
.firma{margin-top:20px;opacity:0;transition:opacity 3s}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div class="texto">
  <h1>TE AMO ALEJANDRA</h1>
  <p id="frase"></p>
  <div class="firma" id="firma">‚Äî Danny</div>
</div>

<audio id="audio" autoplay loop muted>
  <source src="quiero-decirte.mp3" type="audio/mpeg">
</audio>

<script>
const c = document.getElementById("canvas");
const ctx = c.getContext("2d");
c.width = innerWidth;
c.height = innerHeight;

let t = 0;

/* üíì CORAZ√ìN GRANDE QUE SE DIBUJA Y LATE */
function corazon(x,y,s,beat,prog){
 ctx.save();
 ctx.translate(x,y);
 ctx.scale(s+beat,s+beat);
 ctx.beginPath();

 const max = Math.PI * 2 * prog;
 for(let i=0;i<max;i+=0.01){
  const px = 16*Math.pow(Math.sin(i),3);
  const py = -(13*Math.cos(i)-5*Math.cos(2*i)-2*Math.cos(3*i)-Math.cos(4*i));
  ctx.lineTo(px,py);
 }

 ctx.strokeStyle="#ff4d6d";
 ctx.lineWidth=2;
 ctx.shadowColor="#ff4d6d";
 ctx.shadowBlur=25;
 ctx.stroke();

 if(prog>=1){
  ctx.fillStyle="#ff4d6d";
  ctx.fill();
 }

 ctx.restore();
}

/* üå∏ FLOR GRANDE PROGRESIVA */
function flor(x,y,s,prog,w){
 for(let i=0;i<6*prog;i++){
  ctx.save();
  ctx.translate(x,y);
  ctx.rotate((Math.PI*2/6)*i+w);
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.quadraticCurveTo(s/2,-s,0,-s*1.8);
  ctx.quadraticCurveTo(-s/2,-s,0,0);
  const g=ctx.createRadialGradient(0,-s,5,0,-s,s);
  g.addColorStop(0,"#fff9c4");
  g.addColorStop(1,"#ffd700");
  ctx.fillStyle=g;
  ctx.shadowColor="#ffd700";
  ctx.shadowBlur=18;
  ctx.fill();
  ctx.restore();
 }
}

/* ‚ú® LUCI√âRNAGAS */
const luces=[...Array(60)].map(()=>({
 x:Math.random()*c.width,
 y:Math.random()*c.height,
 r:Math.random()*2+1,
 v:Math.random()*0.6+0.3
}));

/* üå∏ P√âTALOS */
const petalos=[...Array(40)].map(()=>({
 x:Math.random()*c.width,
 y:Math.random()*c.height,
 r:Math.random()*7+5,
 v:Math.random()*1.2+0.5,
 a:Math.random()*Math.PI
}));

/* üíå TEXTO */
const mensaje="Si el amor tuviera forma, llevar√≠a tu nombre. En cada latido, en cada sue√±o, siempre eres t√∫.";
let i=0;
const frase=document.getElementById("frase");
const firma=document.getElementById("firma");

function escribir(){
 if(i<mensaje.length){
  frase.innerHTML+=mensaje.charAt(i++);
  setTimeout(escribir,70);
 }else{
  setTimeout(()=>firma.style.opacity=1,1500);
 }
}
escribir();

/* üéµ ACTIVAR AUDIO */
document.body.addEventListener("click",()=>{
 const a=document.getElementById("audio");
 a.muted=false;
 a.play();
},{once:true});

/* üé¨ ANIMACI√ìN */
function animar(){
 ctx.clearRect(0,0,c.width,c.height);

 // luci√©rnagas
 luces.forEach(l=>{
  ctx.beginPath();
  ctx.arc(l.x,l.y,l.r,0,Math.PI*2);
  ctx.fillStyle="rgba(255,215,0,0.85)";
  ctx.fill();
  l.y-=l.v;
  if(l.y<0)l.y=c.height;
 });

 // p√©talos
 petalos.forEach(p=>{
  ctx.beginPath();
  ctx.ellipse(p.x,p.y,p.r,p.r*0.6,p.a,0,Math.PI*2);
  ctx.fillStyle="rgba(255,182,193,0.75)";
  ctx.fill();
  p.y+=p.v;
  p.a+=0.01;
  if(p.y>c.height){p.y=-20;p.x=Math.random()*c.width}
 });

 const progresoCorazon = Math.min(1, t/3);
 const beat = progresoCorazon>=1 ? Math.abs(Math.sin(t*2))*0.08 : 0;

 // ‚ù§Ô∏è CORAZ√ìN GRANDE
 corazon(c.width/2, c.height*0.48, 2.2, beat, progresoCorazon);

 // üå∏ FLORES GRANDES
 const prog = Math.min(1, t/3);
 flor(c.width/2-260, c.height*0.72, 95, prog, Math.sin(t)*0.2);
 flor(c.width/2+260, c.height*0.72, 95, prog, -Math.sin(t)*0.2);

 t+=0.02;
 requestAnimationFrame(animar);
}
animar();

onresize=()=>{
 c.width=innerWidth;
 c.height=innerHeight;
};
</script>

</body>
</html>
